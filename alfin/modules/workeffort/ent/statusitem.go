// Code generated by entc, DO NOT EDIT.

package ent

import (
	"fmt"
	"strings"
	"time"

	"entgo.io/ent/dialect/sql"
	"github.com/samlet/petrel/alfin/modules/workeffort/ent/statusitem"
	"github.com/samlet/petrel/alfin/modules/workeffort/ent/statustype"
)

// StatusItem is the model entity for the StatusItem schema.
type StatusItem struct {
	config `json:"-"`
	// ID of the ent.
	ID int `json:"id,omitempty"`
	// CreateTime holds the value of the "create_time" field.
	CreateTime time.Time `json:"create_time,omitempty"`
	// UpdateTime holds the value of the "update_time" field.
	UpdateTime time.Time `json:"update_time,omitempty"`
	// StringRef holds the value of the "string_ref" field.
	StringRef string `json:"string_ref,omitempty"`
	// StatusCode holds the value of the "status_code" field.
	StatusCode string `json:"status_code,omitempty"`
	// SequenceID holds the value of the "sequence_id" field.
	SequenceID int `json:"sequence_id,omitempty"`
	// Description holds the value of the "description" field.
	Description string `json:"description,omitempty"`
	// Edges holds the relations/edges for other nodes in the graph.
	// The values are being populated by the StatusItemQuery when eager-loading is set.
	Edges                    StatusItemEdges `json:"edges"`
	status_type_status_items *int
}

// StatusItemEdges holds the relations/edges for other nodes in the graph.
type StatusItemEdges struct {
	// StatusType holds the value of the status_type edge.
	StatusType *StatusType `json:"status_type,omitempty"`
	// Parties holds the value of the parties edge.
	Parties []*Party `json:"parties,omitempty"`
	// PartyStatuses holds the value of the party_statuses edge.
	PartyStatuses []*PartyStatus `json:"party_statuses,omitempty"`
	// MainStatusValidChanges holds the value of the main_status_valid_changes edge.
	MainStatusValidChanges []*StatusValidChange `json:"main_status_valid_changes,omitempty"`
	// ToStatusValidChanges holds the value of the to_status_valid_changes edge.
	ToStatusValidChanges []*StatusValidChange `json:"to_status_valid_changes,omitempty"`
	// CurrentWorkEfforts holds the value of the current_work_efforts edge.
	CurrentWorkEfforts []*WorkEffort `json:"current_work_efforts,omitempty"`
	// WorkEffortFixedAssetAssigns holds the value of the work_effort_fixed_asset_assigns edge.
	WorkEffortFixedAssetAssigns []*WorkEffortFixedAssetAssign `json:"work_effort_fixed_asset_assigns,omitempty"`
	// AvailabilityWorkEffortFixedAssetAssigns holds the value of the availability_work_effort_fixed_asset_assigns edge.
	AvailabilityWorkEffortFixedAssetAssigns []*WorkEffortFixedAssetAssign `json:"availability_work_effort_fixed_asset_assigns,omitempty"`
	// AssignmentWorkEffortPartyAssignments holds the value of the assignment_work_effort_party_assignments edge.
	AssignmentWorkEffortPartyAssignments []*WorkEffortPartyAssignment `json:"assignment_work_effort_party_assignments,omitempty"`
	// AvailabilityWorkEffortPartyAssignments holds the value of the availability_work_effort_party_assignments edge.
	AvailabilityWorkEffortPartyAssignments []*WorkEffortPartyAssignment `json:"availability_work_effort_party_assignments,omitempty"`
	// loadedTypes holds the information for reporting if a
	// type was loaded (or requested) in eager-loading or not.
	loadedTypes [10]bool
}

// StatusTypeOrErr returns the StatusType value or an error if the edge
// was not loaded in eager-loading, or loaded but was not found.
func (e StatusItemEdges) StatusTypeOrErr() (*StatusType, error) {
	if e.loadedTypes[0] {
		if e.StatusType == nil {
			// The edge status_type was loaded in eager-loading,
			// but was not found.
			return nil, &NotFoundError{label: statustype.Label}
		}
		return e.StatusType, nil
	}
	return nil, &NotLoadedError{edge: "status_type"}
}

// PartiesOrErr returns the Parties value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) PartiesOrErr() ([]*Party, error) {
	if e.loadedTypes[1] {
		return e.Parties, nil
	}
	return nil, &NotLoadedError{edge: "parties"}
}

// PartyStatusesOrErr returns the PartyStatuses value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) PartyStatusesOrErr() ([]*PartyStatus, error) {
	if e.loadedTypes[2] {
		return e.PartyStatuses, nil
	}
	return nil, &NotLoadedError{edge: "party_statuses"}
}

// MainStatusValidChangesOrErr returns the MainStatusValidChanges value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) MainStatusValidChangesOrErr() ([]*StatusValidChange, error) {
	if e.loadedTypes[3] {
		return e.MainStatusValidChanges, nil
	}
	return nil, &NotLoadedError{edge: "main_status_valid_changes"}
}

// ToStatusValidChangesOrErr returns the ToStatusValidChanges value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) ToStatusValidChangesOrErr() ([]*StatusValidChange, error) {
	if e.loadedTypes[4] {
		return e.ToStatusValidChanges, nil
	}
	return nil, &NotLoadedError{edge: "to_status_valid_changes"}
}

// CurrentWorkEffortsOrErr returns the CurrentWorkEfforts value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) CurrentWorkEffortsOrErr() ([]*WorkEffort, error) {
	if e.loadedTypes[5] {
		return e.CurrentWorkEfforts, nil
	}
	return nil, &NotLoadedError{edge: "current_work_efforts"}
}

// WorkEffortFixedAssetAssignsOrErr returns the WorkEffortFixedAssetAssigns value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) WorkEffortFixedAssetAssignsOrErr() ([]*WorkEffortFixedAssetAssign, error) {
	if e.loadedTypes[6] {
		return e.WorkEffortFixedAssetAssigns, nil
	}
	return nil, &NotLoadedError{edge: "work_effort_fixed_asset_assigns"}
}

// AvailabilityWorkEffortFixedAssetAssignsOrErr returns the AvailabilityWorkEffortFixedAssetAssigns value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) AvailabilityWorkEffortFixedAssetAssignsOrErr() ([]*WorkEffortFixedAssetAssign, error) {
	if e.loadedTypes[7] {
		return e.AvailabilityWorkEffortFixedAssetAssigns, nil
	}
	return nil, &NotLoadedError{edge: "availability_work_effort_fixed_asset_assigns"}
}

// AssignmentWorkEffortPartyAssignmentsOrErr returns the AssignmentWorkEffortPartyAssignments value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) AssignmentWorkEffortPartyAssignmentsOrErr() ([]*WorkEffortPartyAssignment, error) {
	if e.loadedTypes[8] {
		return e.AssignmentWorkEffortPartyAssignments, nil
	}
	return nil, &NotLoadedError{edge: "assignment_work_effort_party_assignments"}
}

// AvailabilityWorkEffortPartyAssignmentsOrErr returns the AvailabilityWorkEffortPartyAssignments value or an error if the edge
// was not loaded in eager-loading.
func (e StatusItemEdges) AvailabilityWorkEffortPartyAssignmentsOrErr() ([]*WorkEffortPartyAssignment, error) {
	if e.loadedTypes[9] {
		return e.AvailabilityWorkEffortPartyAssignments, nil
	}
	return nil, &NotLoadedError{edge: "availability_work_effort_party_assignments"}
}

// scanValues returns the types for scanning values from sql.Rows.
func (*StatusItem) scanValues(columns []string) ([]interface{}, error) {
	values := make([]interface{}, len(columns))
	for i := range columns {
		switch columns[i] {
		case statusitem.FieldID, statusitem.FieldSequenceID:
			values[i] = new(sql.NullInt64)
		case statusitem.FieldStringRef, statusitem.FieldStatusCode, statusitem.FieldDescription:
			values[i] = new(sql.NullString)
		case statusitem.FieldCreateTime, statusitem.FieldUpdateTime:
			values[i] = new(sql.NullTime)
		case statusitem.ForeignKeys[0]: // status_type_status_items
			values[i] = new(sql.NullInt64)
		default:
			return nil, fmt.Errorf("unexpected column %q for type StatusItem", columns[i])
		}
	}
	return values, nil
}

// assignValues assigns the values that were returned from sql.Rows (after scanning)
// to the StatusItem fields.
func (si *StatusItem) assignValues(columns []string, values []interface{}) error {
	if m, n := len(values), len(columns); m < n {
		return fmt.Errorf("mismatch number of scan values: %d != %d", m, n)
	}
	for i := range columns {
		switch columns[i] {
		case statusitem.FieldID:
			value, ok := values[i].(*sql.NullInt64)
			if !ok {
				return fmt.Errorf("unexpected type %T for field id", value)
			}
			si.ID = int(value.Int64)
		case statusitem.FieldCreateTime:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field create_time", values[i])
			} else if value.Valid {
				si.CreateTime = value.Time
			}
		case statusitem.FieldUpdateTime:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field update_time", values[i])
			} else if value.Valid {
				si.UpdateTime = value.Time
			}
		case statusitem.FieldStringRef:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field string_ref", values[i])
			} else if value.Valid {
				si.StringRef = value.String
			}
		case statusitem.FieldStatusCode:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field status_code", values[i])
			} else if value.Valid {
				si.StatusCode = value.String
			}
		case statusitem.FieldSequenceID:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field sequence_id", values[i])
			} else if value.Valid {
				si.SequenceID = int(value.Int64)
			}
		case statusitem.FieldDescription:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field description", values[i])
			} else if value.Valid {
				si.Description = value.String
			}
		case statusitem.ForeignKeys[0]:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for edge-field status_type_status_items", value)
			} else if value.Valid {
				si.status_type_status_items = new(int)
				*si.status_type_status_items = int(value.Int64)
			}
		}
	}
	return nil
}

// QueryStatusType queries the "status_type" edge of the StatusItem entity.
func (si *StatusItem) QueryStatusType() *StatusTypeQuery {
	return (&StatusItemClient{config: si.config}).QueryStatusType(si)
}

// QueryParties queries the "parties" edge of the StatusItem entity.
func (si *StatusItem) QueryParties() *PartyQuery {
	return (&StatusItemClient{config: si.config}).QueryParties(si)
}

// QueryPartyStatuses queries the "party_statuses" edge of the StatusItem entity.
func (si *StatusItem) QueryPartyStatuses() *PartyStatusQuery {
	return (&StatusItemClient{config: si.config}).QueryPartyStatuses(si)
}

// QueryMainStatusValidChanges queries the "main_status_valid_changes" edge of the StatusItem entity.
func (si *StatusItem) QueryMainStatusValidChanges() *StatusValidChangeQuery {
	return (&StatusItemClient{config: si.config}).QueryMainStatusValidChanges(si)
}

// QueryToStatusValidChanges queries the "to_status_valid_changes" edge of the StatusItem entity.
func (si *StatusItem) QueryToStatusValidChanges() *StatusValidChangeQuery {
	return (&StatusItemClient{config: si.config}).QueryToStatusValidChanges(si)
}

// QueryCurrentWorkEfforts queries the "current_work_efforts" edge of the StatusItem entity.
func (si *StatusItem) QueryCurrentWorkEfforts() *WorkEffortQuery {
	return (&StatusItemClient{config: si.config}).QueryCurrentWorkEfforts(si)
}

// QueryWorkEffortFixedAssetAssigns queries the "work_effort_fixed_asset_assigns" edge of the StatusItem entity.
func (si *StatusItem) QueryWorkEffortFixedAssetAssigns() *WorkEffortFixedAssetAssignQuery {
	return (&StatusItemClient{config: si.config}).QueryWorkEffortFixedAssetAssigns(si)
}

// QueryAvailabilityWorkEffortFixedAssetAssigns queries the "availability_work_effort_fixed_asset_assigns" edge of the StatusItem entity.
func (si *StatusItem) QueryAvailabilityWorkEffortFixedAssetAssigns() *WorkEffortFixedAssetAssignQuery {
	return (&StatusItemClient{config: si.config}).QueryAvailabilityWorkEffortFixedAssetAssigns(si)
}

// QueryAssignmentWorkEffortPartyAssignments queries the "assignment_work_effort_party_assignments" edge of the StatusItem entity.
func (si *StatusItem) QueryAssignmentWorkEffortPartyAssignments() *WorkEffortPartyAssignmentQuery {
	return (&StatusItemClient{config: si.config}).QueryAssignmentWorkEffortPartyAssignments(si)
}

// QueryAvailabilityWorkEffortPartyAssignments queries the "availability_work_effort_party_assignments" edge of the StatusItem entity.
func (si *StatusItem) QueryAvailabilityWorkEffortPartyAssignments() *WorkEffortPartyAssignmentQuery {
	return (&StatusItemClient{config: si.config}).QueryAvailabilityWorkEffortPartyAssignments(si)
}

// Update returns a builder for updating this StatusItem.
// Note that you need to call StatusItem.Unwrap() before calling this method if this StatusItem
// was returned from a transaction, and the transaction was committed or rolled back.
func (si *StatusItem) Update() *StatusItemUpdateOne {
	return (&StatusItemClient{config: si.config}).UpdateOne(si)
}

// Unwrap unwraps the StatusItem entity that was returned from a transaction after it was closed,
// so that all future queries will be executed through the driver which created the transaction.
func (si *StatusItem) Unwrap() *StatusItem {
	tx, ok := si.config.driver.(*txDriver)
	if !ok {
		panic("ent: StatusItem is not a transactional entity")
	}
	si.config.driver = tx.drv
	return si
}

// String implements the fmt.Stringer.
func (si *StatusItem) String() string {
	var builder strings.Builder
	builder.WriteString("StatusItem(")
	builder.WriteString(fmt.Sprintf("id=%v", si.ID))
	builder.WriteString(", create_time=")
	builder.WriteString(si.CreateTime.Format(time.ANSIC))
	builder.WriteString(", update_time=")
	builder.WriteString(si.UpdateTime.Format(time.ANSIC))
	builder.WriteString(", string_ref=")
	builder.WriteString(si.StringRef)
	builder.WriteString(", status_code=")
	builder.WriteString(si.StatusCode)
	builder.WriteString(", sequence_id=")
	builder.WriteString(fmt.Sprintf("%v", si.SequenceID))
	builder.WriteString(", description=")
	builder.WriteString(si.Description)
	builder.WriteByte(')')
	return builder.String()
}

// StatusItems is a parsable slice of StatusItem.
type StatusItems []*StatusItem

func (si StatusItems) config(cfg config) {
	for _i := range si {
		si[_i].config = cfg
	}
}
